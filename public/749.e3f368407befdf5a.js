"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[749],{3749:(_e,Q,c)=>{c.r(Q),c.d(Q,{DireccionesModule:()=>u});var N=c(9299),I=c(4859),k=c(6709),f=c(9549),F=c(7392),C=c(284),Y=c(8255),y=c(8739),U=c(3162),B=c(3238),D=c(6308),S=c(4385),E=c(455),L=c(266),z=c(4466),g=c(5412),s=c(4006),O=c(7155),e=c(4650);class h{constructor(){}}h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["direcciones"]],decls:1,vars:0,template:function(t,i){1&t&&e._UZ(0,"router-outlet")},dependencies:[N.lC],encapsulation:2,changeDetection:0});var w=c(7579),A=c(2722),R=c(8372),v=c(3900),_=c(4004),G=c(6451),j=c(8288),x=c(6895);function $(n,t){1&n&&(e.TgZ(0,"h1",14),e._uU(1,"Agregar direccion"),e.qZA())}function H(n,t){1&n&&(e.TgZ(0,"h1",14),e._uU(1,"Editar direccion"),e.qZA())}function X(n,t){1&n&&(e.TgZ(0,"h1",14),e._uU(1,"Datos del direccion"),e.qZA())}function K(n,t){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "nombre" es requerido. '),e.qZA())}function W(n,t){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "nombre" debe tener al menos 3 caracteres. '),e.qZA())}function q(n,t){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "nombre" debe tener un m\xe1ximo 3 caracteres. '),e.qZA())}function V(n,t){if(1&n&&(e.TgZ(0,"div",15),e.YNc(1,K,2,0,"div",16),e.YNc(2,W,2,0,"div",16),e.YNc(3,q,2,0,"div",16),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.nombre.errors?null:i.nombre.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.nombre.errors?null:i.nombre.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==i.nombre.errors?null:i.nombre.errors.maxlength)}}function P(n,t){1&n&&e._UZ(0,"div",15)}function ee(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.closeDialog())}),e._uU(1," Cancelar "),e.qZA()}}function te(n,t){if(1&n&&(e.TgZ(0,"button",18),e._uU(1),e.qZA()),2&n){const i=e.oxw();e.Q6J("color","primary")("disabled",i.direccionesForm.invalid),e.xp6(1),e.hij(" ",i.actionBtn," ")}}function ie(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.closeDialog())}),e._uU(1,"Cerrar"),e.qZA()}}class d{constructor(t,i,o){this._formBuilder=t,this.dialogRef=i,this.data=o,this.isLoading=!1,this.actionBtn="Guardar"}ngOnInit(){this.direccionesForm=this._formBuilder.group({nombre:["",s.kI.compose([s.kI.required,s.kI.minLength(3),s.kI.maxLength(60)])],estado:[!0,s.kI.compose([])]}),"crear"!==this.data.action&&(this.actionBtn="Actualizar",this.direccionesForm.controls.nombre.setValue(this.data.direccion.nombre),this.direccionesForm.controls.estado.setValue(this.data.direccion.estado))}get nombre(){return this.direccionesForm.get("nombre")}get estado(){return this.direccionesForm.get("estado")}closeDialog(){this.dialogRef.close(!1)}guardar(){if(!this.direccionesForm.invalid)return this.dialogRef.close(this.direccionesForm.value)}}d.\u0275fac=function(t){return new(t||d)(e.Y36(s.qu),e.Y36(g.so),e.Y36(g.WI))},d.\u0275cmp=e.Xpm({type:d,selectors:[["modalDialog"]],decls:21,vars:12,consts:[[1,"flex","w-full"],["class","font-bold px-0 text-lg","mat-dialog-title","",4,"ngIf"],[1,"m-0"],[1,"mt-5",3,"formGroup","ngSubmit"],[1,"grid","sm:grid-cols-6","gap-6"],[1,"mt-2","col-span-6","md:col-span-2"],[1,"fuse-mat-no-subscript","w-full"],["matInput","","formControlName","nombre",3,"placeholder","spellcheck"],["class","alert alert-danger mt-2 px-1 text-red-500",4,"ngIf"],["formControlName","estado",1,"mt-5",3,"color"],[1,"flex","justify-end","mt-8"],["type","button","class","ml-auto","mat-button","",3,"click",4,"ngIf"],["type","submit","class","ml-2","mat-flat-button","",3,"color","disabled",4,"ngIf"],["class"," ","mat-button","","mat-dialog-close","",3,"click",4,"ngIf"],["mat-dialog-title","",1,"font-bold","px-0","text-lg"],[1,"alert","alert-danger","mt-2","px-1","text-red-500"],[4,"ngIf"],["type","button","mat-button","",1,"ml-auto",3,"click"],["type","submit","mat-flat-button","",1,"ml-2",3,"color","disabled"],["mat-button","","mat-dialog-close","",1,"",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,$,2,0,"h1",1),e.YNc(2,H,2,0,"h1",1),e.YNc(3,X,2,0,"h1",1),e.qZA(),e._UZ(4,"hr",2),e.TgZ(5,"form",3),e.NdJ("ngSubmit",function(){return i.guardar()}),e.TgZ(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Nombre"),e.qZA(),e._UZ(11,"input",7),e.qZA(),e.YNc(12,V,4,3,"div",8),e.qZA(),e.TgZ(13,"div",5)(14,"mat-checkbox",9),e._uU(15," Estado "),e.qZA(),e.YNc(16,P,1,0,"div",8),e.qZA()(),e.TgZ(17,"div",10),e.YNc(18,ee,2,0,"button",11),e.YNc(19,te,2,3,"button",12),e.YNc(20,ie,2,0,"button",13),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf","crear"===i.data.action),e.xp6(1),e.Q6J("ngIf","editar"===i.data.action),e.xp6(1),e.Q6J("ngIf","ver"===i.data.action),e.xp6(2),e.Q6J("formGroup",i.direccionesForm),e.xp6(6),e.Q6J("placeholder","Nombre")("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",i.nombre.invalid&&(i.nombre.dirty||i.nombre.touched)),e.xp6(2),e.Q6J("color","primary"),e.xp6(2),e.Q6J("ngIf",i.estado.invalid&&(i.estado.dirty||i.estado.touched)),e.xp6(2),e.Q6J("ngIf","ver"!==i.data.action),e.xp6(1),e.Q6J("ngIf","ver"!==i.data.action),e.xp6(1),e.Q6J("ngIf","ver"===i.data.action))},dependencies:[I.lW,k.oG,f.KE,f.hX,C.Nt,x.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,g.ZT,g.uh]});var M=c(1135),ne=c(8505),J=c(5698),Z=c(2340),oe=c(529);class m{constructor(t){this._httpClient=t,this._direcciones=new M.X([]),this._paginationDirecciones=new M.X(null)}get direcciones$(){return this._direcciones.asObservable()}get paginationDirecciones$(){return this._paginationDirecciones.asObservable()}getDirecciones(t=0,i=10,o="_id",r="desc",a=""){return this._httpClient.get(Z.N.api+"direcciones",{params:{page:""+t,size:""+i,sort:o,order:r,search:a}}).pipe((0,ne.b)(l=>{this._direcciones.next(l.registros),this._paginationDirecciones.next(l.pagination)}))}createDireccion(t){return this.direcciones$.pipe((0,J.q)(1),(0,v.w)(i=>this._httpClient.post(Z.N.api+"direcciones",t).pipe((0,_.U)(o=>(this._direcciones.next([o.registro,...i]),o)))))}updateDireccion(t,i){return this.direcciones$.pipe((0,J.q)(1),(0,v.w)(o=>this._httpClient.patch(Z.N.api+"direcciones/"+t,{registro:i}).pipe((0,_.U)(r=>{for(let a=0;a<o.length;a++)if(o[a]._id===t){o[a]=r.registroActualizado;break}return this._direcciones.next(o),r}))))}deleteDireccion(t){return this.direcciones$.pipe((0,J.q)(1),(0,v.w)(i=>this._httpClient.delete(Z.N.api+"direcciones/"+t).pipe((0,_.U)(o=>{if(o.ok){const r=i.filter(a=>a._id!==t);return this._direcciones.next(r),o}return o}))))}}m.\u0275fac=function(t){return new(t||m)(e.LFG(oe.eN))},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});var ce=c(8552),re=c(6e3);function se(n,t){1&n&&(e.TgZ(0,"div",15),e._UZ(1,"mat-progress-bar",16),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function ae(n,t){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",31),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function le(n,t){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",32),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function de(n,t){if(1&n){const i=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"div",22),e._uU(3),e.qZA(),e.TgZ(4,"div",26),e.YNc(5,ae,2,1,"ng-container",13),e.YNc(6,le,2,1,"ng-container",13),e.qZA(),e.TgZ(7,"div",27)(8,"button",28)(9,"mat-icon",29),e.NdJ("click",function(){const a=e.CHM(i).$implicit,l=e.oxw(4);return e.KtG(l.editar(a))}),e.qZA()(),e.TgZ(10,"button",28)(11,"mat-icon",30),e.NdJ("click",function(){const a=e.CHM(i).$implicit,l=e.oxw(4);return e.KtG(l.eliminar(a))}),e.qZA()()()(),e.BQk()}if(2&n){const i=t.$implicit;e.xp6(3),e.hij(" ",i.nombre," "),e.xp6(2),e.Q6J("ngIf",i.estado),e.xp6(1),e.Q6J("ngIf",!i.estado),e.xp6(2),e.Q6J("matTooltip","Editar"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:pencil"),e.xp6(1),e.Q6J("matTooltip","Eliminar")}}function me(n,t){if(1&n&&(e.ynx(0),e.YNc(1,de,12,6,"ng-container",24),e.BQk()),2&n){const i=t.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i)("ngForTrackBy",o.trackByFn)}}const ge=function(n){return{"pointer-events-none":n}},pe=function(){return[5,10,25,100]};function ue(n,t){if(1&n&&(e.ynx(0),e.TgZ(1,"div",18)(2,"div",19)(3,"div",20),e._uU(4," NOMBRE "),e.qZA(),e.TgZ(5,"div",21),e._uU(6," ESTADO "),e.qZA(),e.TgZ(7,"div",22),e._uU(8,"ACCIONES"),e.qZA()(),e.YNc(9,me,2,2,"ng-container",13),e.ALo(10,"async"),e.qZA(),e._UZ(11,"mat-paginator",23),e.BQk()),2&n){const i=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","nombre"),e.xp6(2),e.Q6J("mat-sort-header","estado"),e.xp6(4),e.Q6J("ngIf",e.lcZ(10,9,i.direcciones$)),e.xp6(2),e.Q6J("ngClass",e.VKq(11,ge,i.isLoading))("length",i.paginationDirecciones.length)("pageIndex",i.paginationDirecciones.page)("pageSize",i.paginationDirecciones.size)("pageSizeOptions",e.DdM(13,pe))("showFirstLastButtons",!0)}}function fe(n,t){if(1&n&&(e.ynx(0),e.YNc(1,ue,12,14,"ng-container",17),e.BQk()),2&n){const i=t.ngIf;e.oxw();const o=e.MAs(18);e.xp6(1),e.Q6J("ngIf",i.length>0)("ngIfElse",o)}}function he(n,t){1&n&&(e.TgZ(0,"div",33),e._uU(1,"No ha registros!"),e.qZA())}class b{constructor(t,i,o,r,a){this._changeDetectorRef=t,this._direccionesService=i,this._dialog=o,this._snackBar=r,this._confirmDialog=a,this.searchInputControl=new s.p4,this._unsubscribeAll=new w.x,this.isLoading=!1}ngOnInit(){this._direccionesService.paginationDirecciones$.pipe((0,A.R)(this._unsubscribeAll)).subscribe(t=>{this.paginationDirecciones=t,this._changeDetectorRef.markForCheck()}),this.direcciones$=this._direccionesService.direcciones$,this.searchInputControl.valueChanges.pipe((0,A.R)(this._unsubscribeAll),(0,R.b)(300),(0,v.w)(t=>(this.isLoading=!0,this._direccionesService.getDirecciones(0,10,"_id","desc",t))),(0,_.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"_id",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,A.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,G.T)(this._sort.sortChange,this._paginator.page).pipe((0,v.w)(()=>(this.isLoading=!0,this._direccionesService.getDirecciones(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,_.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}crear(){this._dialog.open(d,{height:"auto",width:"800px",autoFocus:!1,data:{cliente:!1,action:"crear"}}).afterClosed().subscribe(i=>{i&&this._direccionesService.createDireccion(i).subscribe(o=>{o.ok&&this._snackBar.mostrarAlerta(o.mensaje,"mat-primary")})})}editar(t){this._dialog.open(d,{height:"auto",width:"800px",autoFocus:!1,data:{direccion:t,action:"editar"}}).afterClosed().subscribe(o=>{o&&this._direccionesService.updateDireccion(t._id,o).subscribe(r=>{r.ok&&this._snackBar.mostrarAlerta(r.mensaje,"mat-primary")})})}ver(t){this._dialog.open(d,{height:"650px",autoFocus:!1,data:{direccion:t,action:"ver"}})}eliminar(t){this._confirmDialog.open("\xbfEst\xe1s seguro de que deseas eliminar este producto?","\xa1Esta acci\xf3n no se puede deshacer!","Eliminar").afterClosed().subscribe(l=>{"confirmed"===l&&this._direccionesService.deleteDireccion(t._id).subscribe(T=>{this._snackBar.mostrarAlerta(T.mensaje,T.ok?"mat-primary":T.alerta)})})}trackByFn(t,i){return i.id||t}}b.\u0275fac=function(t){return new(t||b)(e.Y36(e.sBO),e.Y36(m),e.Y36(g.uw),e.Y36(ce.c),e.Y36(re.E))},b.\u0275cmp=e.Xpm({type:b,selectors:[["direcciones-list"]],viewQuery:function(t,i){if(1&t&&(e.Gf(y.NW,5),e.Gf(D.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(i._paginator=o.first),e.iGM(o=e.CRH())&&(i._sort=o.first)}},decls:19,vars:10,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["noDirecciones",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid-direcciones","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,""],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid-direcciones","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"hidden","sm:block"],[1,"flex"],[1,"min-w-10","min-h-7","h-7",3,"matTooltip"],[1,"icon-size-5","text-blue-500",3,"svgIcon","click"],["svgIcon","heroicons_outline:trash",1,"text-red-500",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,se,2,1,"div",2),e.TgZ(3,"div",3),e._uU(4,"Direcciones"),e.qZA(),e.TgZ(5,"div",4)(6,"mat-form-field",5),e._UZ(7,"mat-icon",6)(8,"input",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return i.crear()}),e._UZ(10,"mat-icon",9),e.TgZ(11,"span",10),e._uU(12,"Crear"),e.qZA()()()(),e.TgZ(13,"div",11)(14,"div",12),e.YNc(15,fe,2,2,"ng-container",13),e.ALo(16,"async"),e.YNc(17,he,2,0,"ng-template",null,14,e.W1O),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",i.isLoading),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Buscar..."),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(16,8,i.direcciones$)))},dependencies:[I.lW,f.KE,f.qo,F.Hw,C.Nt,y.NW,U.pW,D.YE,D.nU,L.gM,x.mk,x.sg,x.O5,s.Fj,s.JJ,s.oH,x.Ov],styles:[".inventory-grid-direcciones{grid-template-columns:auto 100px}@media (min-width: 600px){.inventory-grid-direcciones{grid-template-columns:auto 100px 100px}}@media (min-width: 960px){.inventory-grid-direcciones{grid-template-columns:auto 100px 100px}}@media (min-width: 1280px){.inventory-grid-direcciones{grid-template-columns:auto 100px 100px}}\n"],encapsulation:2,data:{animation:j.L},changeDetection:0});class p{constructor(t){this._direccionesService=t}resolve(t,i){return this._direccionesService.getDirecciones()}}p.\u0275fac=function(t){return new(t||p)(e.LFG(m))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});const ve=[{path:"",pathMatch:"full",redirectTo:"lista"},{path:"lista",component:h,children:[{path:"",component:b,resolve:{direcciones:p}}]}];class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[N.Bz.forChild(ve),I.ot,k.p9,f.lN,F.Ps,C.c,Y.Tx,y.TU,U.Cv,B.si,D.JX,S.LD,E.rP,L.AV,z.m,g.Is,s.UX,s.u5,O.p0]})}}]);