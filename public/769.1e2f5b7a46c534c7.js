"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[769],{6769:(Cn,N,s)=>{s.r(N),s.d(N,{CondicionesModule:()=>u});var U=s(9299),I=s(4859),k=s(6709),f=s(9549),F=s(7392),y=s(284),Y=s(8255),A=s(8739),L=s(3162),B=s(3238),b=s(6308),S=s(4385),E=s(455),D=s(266),z=s(4466),g=s(5412),a=s(4006),O=s(7155),n=s(4650);class h{constructor(){}}h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=n.Xpm({type:h,selectors:[["condiciones"]],decls:1,vars:0,template:function(t,o){1&t&&n._UZ(0,"router-outlet")},dependencies:[U.lC],encapsulation:2,changeDetection:0});var w=s(7579),J=s(2722),R=s(8372),v=s(3900),_=s(4004),G=s(6451),j=s(8288),x=s(6895);function $(i,t){1&i&&(n.TgZ(0,"h1",14),n._uU(1," Agregar condicion "),n.qZA())}function H(i,t){1&i&&(n.TgZ(0,"h1",14),n._uU(1," Editar condicion "),n.qZA())}function X(i,t){1&i&&(n.TgZ(0,"h1",14),n._uU(1," Datos del condicion "),n.qZA())}function q(i,t){1&i&&(n.TgZ(0,"div"),n._uU(1,' El campo "nombre" es requerido. '),n.qZA())}function K(i,t){1&i&&(n.TgZ(0,"div"),n._uU(1,' El campo "nombre" debe tener al menos 3 caracteres. '),n.qZA())}function W(i,t){1&i&&(n.TgZ(0,"div"),n._uU(1,' El campo "nombre" debe tener un m\xe1ximo 3 caracteres. '),n.qZA())}function V(i,t){1&i&&(n.TgZ(0,"div"),n._uU(1,' El campo "nombre" solo admite letras. '),n.qZA())}function P(i,t){if(1&i&&(n.TgZ(0,"div",15),n.YNc(1,q,2,0,"div",16),n.YNc(2,K,2,0,"div",16),n.YNc(3,W,2,0,"div",16),n.YNc(4,V,2,0,"div",16),n.qZA()),2&i){const o=n.oxw();n.xp6(1),n.Q6J("ngIf",null==o.nombre.errors?null:o.nombre.errors.required),n.xp6(1),n.Q6J("ngIf",null==o.nombre.errors?null:o.nombre.errors.minlength),n.xp6(1),n.Q6J("ngIf",null==o.nombre.errors?null:o.nombre.errors.maxlength),n.xp6(1),n.Q6J("ngIf",null==o.nombre.errors?null:o.nombre.errors.pattern)}}function nn(i,t){1&i&&n._UZ(0,"div",15)}function on(i,t){if(1&i){const o=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(o);const c=n.oxw();return n.KtG(c.closeDialog())}),n._uU(1," Cancelar "),n.qZA()}}function tn(i,t){if(1&i&&(n.TgZ(0,"button",18),n._uU(1),n.qZA()),2&i){const o=n.oxw();n.Q6J("color","primary")("disabled",o.condicionesForm.invalid),n.xp6(1),n.hij(" ",o.actionBtn," ")}}function en(i,t){if(1&i){const o=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){n.CHM(o);const c=n.oxw();return n.KtG(c.closeDialog())}),n._uU(1," Cerrar "),n.qZA()}}class d{constructor(t,o,e){this._formBuilder=t,this.dialogRef=o,this.data=e,this.isLoading=!1,this.actionBtn="Guardar"}ngOnInit(){this.condicionesForm=this._formBuilder.group({nombre:["",a.kI.compose([a.kI.required,a.kI.minLength(3),a.kI.maxLength(60)])],estado:[!0,a.kI.compose([])]}),"crear"!==this.data.action&&(this.actionBtn="Actualizar",this.condicionesForm.controls.nombre.setValue(this.data.condicion.nombre),this.condicionesForm.controls.estado.setValue(this.data.condicion.estado))}get nombre(){return this.condicionesForm.get("nombre")}get estado(){return this.condicionesForm.get("estado")}closeDialog(){this.dialogRef.close(!1)}guardar(){if(!this.condicionesForm.invalid)return this.dialogRef.close(this.condicionesForm.value)}}d.\u0275fac=function(t){return new(t||d)(n.Y36(a.qu),n.Y36(g.so),n.Y36(g.WI))},d.\u0275cmp=n.Xpm({type:d,selectors:[["modalDialog"]],decls:21,vars:12,consts:[[1,"flex","w-full"],["class","font-bold px-0 text-lg","mat-dialog-title","",4,"ngIf"],[1,"m-0"],[1,"mt-5",3,"formGroup","ngSubmit"],[1,"grid","sm:grid-cols-6","gap-6"],[1,"mt-2","col-span-6","md:col-span-2"],[1,"fuse-mat-no-subscript","w-full"],["matInput","","formControlName","nombre",3,"placeholder","spellcheck"],["class","alert alert-danger mt-2 px-1 text-red-500",4,"ngIf"],["formControlName","estado",1,"mt-5",3,"color"],[1,"flex","justify-end","mt-8"],["type","button","class","ml-auto","mat-button","",3,"click",4,"ngIf"],["type","submit","class","ml-2","mat-flat-button","",3,"color","disabled",4,"ngIf"],["class"," ","mat-button","","mat-dialog-close","",3,"click",4,"ngIf"],["mat-dialog-title","",1,"font-bold","px-0","text-lg"],[1,"alert","alert-danger","mt-2","px-1","text-red-500"],[4,"ngIf"],["type","button","mat-button","",1,"ml-auto",3,"click"],["type","submit","mat-flat-button","",1,"ml-2",3,"color","disabled"],["mat-button","","mat-dialog-close","",1,"",3,"click"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n.YNc(1,$,2,0,"h1",1),n.YNc(2,H,2,0,"h1",1),n.YNc(3,X,2,0,"h1",1),n.qZA(),n._UZ(4,"hr",2),n.TgZ(5,"form",3),n.NdJ("ngSubmit",function(){return o.guardar()}),n.TgZ(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),n._uU(10,"Nombre"),n.qZA(),n._UZ(11,"input",7),n.qZA(),n.YNc(12,P,5,4,"div",8),n.qZA(),n.TgZ(13,"div",5)(14,"mat-checkbox",9),n._uU(15," Estado "),n.qZA(),n.YNc(16,nn,1,0,"div",8),n.qZA()(),n.TgZ(17,"div",10),n.YNc(18,on,2,0,"button",11),n.YNc(19,tn,2,3,"button",12),n.YNc(20,en,2,0,"button",13),n.qZA()()),2&t&&(n.xp6(1),n.Q6J("ngIf","crear"===o.data.action),n.xp6(1),n.Q6J("ngIf","editar"===o.data.action),n.xp6(1),n.Q6J("ngIf","ver"===o.data.action),n.xp6(2),n.Q6J("formGroup",o.condicionesForm),n.xp6(6),n.Q6J("placeholder","Nombre")("spellcheck",!1),n.xp6(1),n.Q6J("ngIf",o.nombre.invalid&&(o.nombre.dirty||o.nombre.touched)),n.xp6(2),n.Q6J("color","primary"),n.xp6(2),n.Q6J("ngIf",o.estado.invalid&&(o.estado.dirty||o.estado.touched)),n.xp6(2),n.Q6J("ngIf","ver"!==o.data.action),n.xp6(1),n.Q6J("ngIf","ver"!==o.data.action),n.xp6(1),n.Q6J("ngIf","ver"===o.data.action))},dependencies:[I.lW,k.oG,f.KE,f.hX,y.Nt,x.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,g.ZT,g.uh]});var M=s(1135),sn=s(8505),Q=s(5698),Z=s(2340),cn=s(529);class m{constructor(t){this._httpClient=t,this._condiciones=new M.X([]),this._paginationCondiciones=new M.X(null)}get condiciones$(){return this._condiciones.asObservable()}get paginationCondiciones$(){return this._paginationCondiciones.asObservable()}getCondiciones(t=0,o=10,e="_id",c="desc",r=""){return this._httpClient.get(Z.N.api+"condiciones",{params:{page:""+t,size:""+o,sort:e,order:c,search:r}}).pipe((0,sn.b)(l=>{this._condiciones.next(l.registros),this._paginationCondiciones.next(l.pagination)}))}createCondicion(t){return this.condiciones$.pipe((0,Q.q)(1),(0,v.w)(o=>this._httpClient.post(Z.N.api+"condiciones",t).pipe((0,_.U)(e=>(this._condiciones.next([e.registro,...o]),e)))))}updateCondicion(t,o){return this.condiciones$.pipe((0,Q.q)(1),(0,v.w)(e=>this._httpClient.patch(Z.N.api+"condiciones/"+t,{registro:o}).pipe((0,_.U)(c=>{for(let r=0;r<e.length;r++)if(e[r]._id===t){e[r]=c.registroActualizado;break}return this._condiciones.next(e),c}))))}deleteCondicion(t){return this.condiciones$.pipe((0,Q.q)(1),(0,v.w)(o=>this._httpClient.delete(Z.N.api+"condiciones/"+t).pipe((0,_.U)(e=>{if(e.ok){const c=o.filter(r=>r._id!==t);return this._condiciones.next(c),e}return e}))))}}m.\u0275fac=function(t){return new(t||m)(n.LFG(cn.eN))},m.\u0275prov=n.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"});var an=s(8552),rn=s(6e3);function ln(i,t){1&i&&(n.TgZ(0,"div",15),n._UZ(1,"mat-progress-bar",16),n.qZA()),2&i&&(n.xp6(1),n.Q6J("mode","indeterminate"))}function dn(i,t){1&i&&(n.ynx(0),n._UZ(1,"mat-icon",31),n.BQk()),2&i&&(n.xp6(1),n.Q6J("svgIcon","heroicons_solid:check"))}function mn(i,t){1&i&&(n.ynx(0),n._UZ(1,"mat-icon",32),n.BQk()),2&i&&(n.xp6(1),n.Q6J("svgIcon","heroicons_solid:x"))}function gn(i,t){if(1&i){const o=n.EpF();n.ynx(0),n.TgZ(1,"div",25)(2,"div",22),n._uU(3),n.qZA(),n.TgZ(4,"div",26),n.YNc(5,dn,2,1,"ng-container",13),n.YNc(6,mn,2,1,"ng-container",13),n.qZA(),n.TgZ(7,"div",27)(8,"button",28)(9,"mat-icon",29),n.NdJ("click",function(){const r=n.CHM(o).$implicit,l=n.oxw(4);return n.KtG(l.editar(r))}),n.qZA()(),n.TgZ(10,"button",28)(11,"mat-icon",30),n.NdJ("click",function(){const r=n.CHM(o).$implicit,l=n.oxw(4);return n.KtG(l.eliminar(r))}),n.qZA()()()(),n.BQk()}if(2&i){const o=t.$implicit;n.xp6(3),n.hij(" ",o.nombre," "),n.xp6(2),n.Q6J("ngIf",o.estado),n.xp6(1),n.Q6J("ngIf",!o.estado),n.xp6(2),n.Q6J("matTooltip","Editar"),n.xp6(1),n.Q6J("svgIcon","heroicons_outline:pencil"),n.xp6(1),n.Q6J("matTooltip","Eliminar")}}function pn(i,t){if(1&i&&(n.ynx(0),n.YNc(1,gn,12,6,"ng-container",24),n.BQk()),2&i){const o=t.ngIf,e=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",o)("ngForTrackBy",e.trackByFn)}}const un=function(i){return{"pointer-events-none":i}},fn=function(){return[5,10,25,100]};function hn(i,t){if(1&i&&(n.ynx(0),n.TgZ(1,"div",18)(2,"div",19)(3,"div",20),n._uU(4," NOMBRE "),n.qZA(),n.TgZ(5,"div",21),n._uU(6," ESTADO "),n.qZA(),n.TgZ(7,"div",22),n._uU(8,"ACCIONES"),n.qZA()(),n.YNc(9,pn,2,2,"ng-container",13),n.ALo(10,"async"),n.qZA(),n._UZ(11,"mat-paginator",23),n.BQk()),2&i){const o=n.oxw(2);n.xp6(3),n.Q6J("mat-sort-header","nombre"),n.xp6(2),n.Q6J("mat-sort-header","estado"),n.xp6(4),n.Q6J("ngIf",n.lcZ(10,9,o.condiciones$)),n.xp6(2),n.Q6J("ngClass",n.VKq(11,un,o.isLoading))("length",o.paginationCondiciones.length)("pageIndex",o.paginationCondiciones.page)("pageSize",o.paginationCondiciones.size)("pageSizeOptions",n.DdM(13,fn))("showFirstLastButtons",!0)}}function vn(i,t){if(1&i&&(n.ynx(0),n.YNc(1,hn,12,14,"ng-container",17),n.BQk()),2&i){const o=t.ngIf;n.oxw();const e=n.MAs(18);n.xp6(1),n.Q6J("ngIf",o.length>0)("ngIfElse",e)}}function _n(i,t){1&i&&(n.TgZ(0,"div",33),n._uU(1,"No ha registros!"),n.qZA())}class C{constructor(t,o,e,c,r){this._changeDetectorRef=t,this._condicionesService=o,this._dialog=e,this._snackBar=c,this._confirmDialog=r,this.searchInputControl=new a.p4,this._unsubscribeAll=new w.x,this.isLoading=!1}ngOnInit(){this._condicionesService.paginationCondiciones$.pipe((0,J.R)(this._unsubscribeAll)).subscribe(t=>{this.paginationCondiciones=t,this._changeDetectorRef.markForCheck()}),this.condiciones$=this._condicionesService.condiciones$,this.searchInputControl.valueChanges.pipe((0,J.R)(this._unsubscribeAll),(0,R.b)(300),(0,v.w)(t=>(this.isLoading=!0,this._condicionesService.getCondiciones(0,10,"_id","desc",t))),(0,_.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"_id",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,J.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,G.T)(this._sort.sortChange,this._paginator.page).pipe((0,v.w)(()=>(this.isLoading=!0,this._condicionesService.getCondiciones(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,_.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}crear(){this._dialog.open(d,{height:"auto",width:"800px",autoFocus:!1,data:{cliente:!1,action:"crear"}}).afterClosed().subscribe(o=>{o&&this._condicionesService.createCondicion(o).subscribe(e=>{e.ok&&this._snackBar.mostrarAlerta(e.mensaje,"mat-primary")})})}editar(t){this._dialog.open(d,{height:"auto",width:"800px",autoFocus:!1,data:{condicion:t,action:"editar"}}).afterClosed().subscribe(e=>{e&&this._condicionesService.updateCondicion(t._id,e).subscribe(c=>{c.ok&&this._snackBar.mostrarAlerta(c.mensaje,"mat-primary")})})}ver(t){this._dialog.open(d,{height:"650px",autoFocus:!1,data:{condicion:t,action:"ver"}})}eliminar(t){this._confirmDialog.open("\xbfEst\xe1s seguro de que deseas eliminar este producto?","\xa1Esta acci\xf3n no se puede deshacer!","Eliminar").afterClosed().subscribe(l=>{"confirmed"===l&&this._condicionesService.deleteCondicion(t._id).subscribe(T=>{this._snackBar.mostrarAlerta(T.mensaje,T.ok?"mat-primary":T.alerta)})})}trackByFn(t,o){return o.id||t}}C.\u0275fac=function(t){return new(t||C)(n.Y36(n.sBO),n.Y36(m),n.Y36(g.uw),n.Y36(an.c),n.Y36(rn.E))},C.\u0275cmp=n.Xpm({type:C,selectors:[["condiciones-list"]],viewQuery:function(t,o){if(1&t&&(n.Gf(A.NW,5),n.Gf(b.YE,5)),2&t){let e;n.iGM(e=n.CRH())&&(o._paginator=e.first),n.iGM(e=n.CRH())&&(o._sort=e.first)}},decls:19,vars:10,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["noCondiciones",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid-condiciones","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,""],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid-condiciones","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"hidden","sm:block"],[1,"flex"],[1,"min-w-10","min-h-7","h-7",3,"matTooltip"],[1,"icon-size-5","text-blue-500",3,"svgIcon","click"],["svgIcon","heroicons_outline:trash",1,"text-red-500",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,ln,2,1,"div",2),n.TgZ(3,"div",3),n._uU(4,"Condiciones"),n.qZA(),n.TgZ(5,"div",4)(6,"mat-form-field",5),n._UZ(7,"mat-icon",6)(8,"input",7),n.qZA(),n.TgZ(9,"button",8),n.NdJ("click",function(){return o.crear()}),n._UZ(10,"mat-icon",9),n.TgZ(11,"span",10),n._uU(12,"Crear"),n.qZA()()()(),n.TgZ(13,"div",11)(14,"div",12),n.YNc(15,vn,2,2,"ng-container",13),n.ALo(16,"async"),n.YNc(17,_n,2,0,"ng-template",null,14,n.W1O),n.qZA()()()),2&t&&(n.xp6(2),n.Q6J("ngIf",o.isLoading),n.xp6(5),n.Q6J("svgIcon","heroicons_solid:search"),n.xp6(1),n.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar..."),n.xp6(1),n.Q6J("color","primary"),n.xp6(1),n.Q6J("svgIcon","heroicons_outline:plus"),n.xp6(5),n.Q6J("ngIf",n.lcZ(16,8,o.condiciones$)))},dependencies:[I.lW,f.KE,f.qo,F.Hw,y.Nt,A.NW,L.pW,b.YE,b.nU,D.gM,x.mk,x.sg,x.O5,a.Fj,a.JJ,a.oH,x.Ov],styles:[".inventory-grid-condiciones{grid-template-columns:auto 100px}@media (min-width: 600px){.inventory-grid-condiciones{grid-template-columns:auto 100px 100px}}@media (min-width: 960px){.inventory-grid-condiciones{grid-template-columns:auto 100px 100px}}@media (min-width: 1280px){.inventory-grid-condiciones{grid-template-columns:auto 100px 100px}}\n"],encapsulation:2,data:{animation:j.L},changeDetection:0});class p{constructor(t){this._condicionesService=t}resolve(t,o){return this._condicionesService.getCondiciones()}}p.\u0275fac=function(t){return new(t||p)(n.LFG(m))},p.\u0275prov=n.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});const xn=[{path:"",pathMatch:"full",redirectTo:"lista"},{path:"lista",component:h,children:[{path:"",component:C,resolve:{clientes:p}}]}];class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=n.oAB({type:u}),u.\u0275inj=n.cJS({imports:[U.Bz.forChild(xn),I.ot,k.p9,f.lN,F.Ps,y.c,Y.Tx,A.TU,L.Cv,B.si,b.JX,S.LD,E.rP,D.AV,z.m,g.Is,a.UX,a.u5,O.p0]})}}]);