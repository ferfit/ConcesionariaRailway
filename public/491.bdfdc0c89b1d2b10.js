"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[491],{9491:(Le,q,a)=>{a.r(q),a.d(q,{ClientesModule:()=>v});var F=a(9299),N=a(4859),M=a(6709),x=a(9549),Y=a(7392),k=a(284),O=a(8255),U=a(8739),L=a(3162),E=a(3238),A=a(6308),S=a(4385),R=a(455),B=a(266),z=a(4466),p=a(5412),l=a(4006),j=a(7155),e=a(4650);class C{constructor(){}}C.\u0275fac=function(i){return new(i||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["clientes"]],decls:1,vars:0,template:function(i,t){1&i&&e._UZ(0,"router-outlet")},dependencies:[F.lC],encapsulation:2,changeDetection:0});var w=a(7579),Z=a(2722),$=a(8372),b=a(3900),T=a(4004),G=a(6451),X=a(8288),J=a(1135),y=a(8505),D=a(5698),g=a(2340),V=a(529);class c{constructor(i){this._httpClient=i,this._clientes=new J.X([]),this._paginationClientes=new J.X(null),this._metodosdecaptacion=new J.X([]),this._tiposclientes=new J.X([])}get clientes$(){return this._clientes.asObservable()}get paginationClientes$(){return this._paginationClientes.asObservable()}get metodosdecaptacion$(){return this._metodosdecaptacion.asObservable()}get tiposclientes$(){return this._tiposclientes.asObservable()}getClientes(i=0,t=10,o="_id",s="desc",r=""){return this._httpClient.get(g.N.api+"clientes",{params:{page:""+i,size:""+t,sort:o,order:s,search:r}}).pipe((0,y.b)(d=>{this._clientes.next(d.registros),this._paginationClientes.next(d.pagination)}))}createCliente(i){return this.clientes$.pipe((0,D.q)(1),(0,b.w)(t=>this._httpClient.post(g.N.api+"clientes",i).pipe((0,T.U)(o=>(this._clientes.next([o.registro,...t]),o)))))}updateCliente(i,t){return this.clientes$.pipe((0,D.q)(1),(0,b.w)(o=>this._httpClient.patch(g.N.api+"clientes/"+i,{registro:t}).pipe((0,T.U)(s=>{for(let r=0;r<o.length;r++)if(o[r]._id===i){o[r]=s.registroActualizado;break}return this._clientes.next(o),s}))))}deleteCliente(i){return this.clientes$.pipe((0,D.q)(1),(0,b.w)(t=>this._httpClient.delete(g.N.api+"clientes/"+i).pipe((0,T.U)(o=>{if(o.ok){const s=t.filter(r=>r._id!==i);return this._clientes.next(s),o}return o}))))}getMetodosDeCaptacion(){return this._httpClient.get(g.N.api+"metododecaptaciones").pipe((0,y.b)(i=>{console.log(i,"===metodos"),this._metodosdecaptacion.next(i)}))}getTiposDeClientes(){return this._httpClient.get(g.N.api+"tipoclientes").pipe((0,y.b)(i=>{console.log(i,"===tiposclientes"),this._tiposclientes.next(i)}))}}c.\u0275fac=function(i){return new(i||c)(e.LFG(V.eN))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});var u=a(6895);function H(n,i){1&n&&(e.TgZ(0,"h1",24),e._uU(1,"Agregar cliente"),e.qZA())}function K(n,i){1&n&&(e.TgZ(0,"h1",24),e._uU(1,"Editar cliente"),e.qZA())}function W(n,i){1&n&&(e.TgZ(0,"h1",24),e._uU(1,"Datos del cliente"),e.qZA())}function P(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "nombre" es requerido. '),e.qZA())}function ee(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "nombre" debe tener al menos 3 caracteres. '),e.qZA())}function te(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "nombre" debe tener un m\xe1ximo 3 caracteres. '),e.qZA())}function ie(n,i){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,P,2,0,"div",26),e.YNc(2,ee,2,0,"div",26),e.YNc(3,te,2,0,"div",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.nombre.errors?null:t.nombre.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.nombre.errors?null:t.nombre.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.nombre.errors?null:t.nombre.errors.maxlength)}}function ne(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "apellido" es requerido. '),e.qZA())}function oe(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "apellido" debe tener al menos 3 caracteres. '),e.qZA())}function le(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "apellido" debe tener un m\xe1ximo 3 caracteres. '),e.qZA())}function ae(n,i){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,ne,2,0,"div",26),e.YNc(2,oe,2,0,"div",26),e.YNc(3,le,2,0,"div",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.apellido.errors?null:t.apellido.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.apellido.errors?null:t.apellido.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.apellido.errors?null:t.apellido.errors.maxlength)}}function se(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "email" es requerido. '),e.qZA())}function re(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "email" debe tener al menos 3 caracteres. '),e.qZA())}function ce(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "email" debe tener un m\xe1ximo 3 caracteres. '),e.qZA())}function de(n,i){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,se,2,0,"div",26),e.YNc(2,re,2,0,"div",26),e.YNc(3,ce,2,0,"div",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.email.errors?null:t.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.email.errors?null:t.email.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.email.errors?null:t.email.errors.maxlength)}}function me(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "celular" es requerido. '),e.qZA())}function pe(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "celular" debe tener al menos 3 caracteres. '),e.qZA())}function ge(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "celular" debe tener un m\xe1ximo 3 caracteres. '),e.qZA())}function ue(n,i){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,me,2,0,"div",26),e.YNc(2,pe,2,0,"div",26),e.YNc(3,ge,2,0,"div",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.celular.errors?null:t.celular.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.celular.errors?null:t.celular.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.celular.errors?null:t.celular.errors.maxlength)}}function fe(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "nota" es requerido. '),e.qZA())}function _e(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,' El campo "nota" debe tener al menos 3 caracteres. '),e.qZA())}function he(n,i){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,fe,2,0,"div",26),e.YNc(2,_e,2,0,"div",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.nota.errors?null:t.nota.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.nota.errors?null:t.nota.errors.minlength)}}function ve(n,i){1&n&&e._UZ(0,"div",25)}function xe(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-option",27),e._uU(2),e.qZA(),e.BQk()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.nombre," ")}}function Ce(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-option",27),e._uU(2),e.qZA(),e.BQk()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.nombre," ")}}function Ze(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.closeDialog())}),e._uU(1," Cancelar "),e.qZA()}}function be(n,i){if(1&n&&(e.TgZ(0,"button",29),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Q6J("color","primary")("disabled",t.clientesForm.invalid),e.xp6(1),e.hij(" ",t.actionBtn," ")}}function Te(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.closeDialog())}),e._uU(1,"Cerrar"),e.qZA()}}class m{constructor(i,t,o,s,r){this._clientesService=i,this._formBuilder=t,this.dialogRef=o,this._changeDetectorRef=s,this.data=r,this.isLoading=!1,this.actionBtn="Guardar",this._unsubscribeAll=new w.x}ngOnInit(){this.clientesForm=this._formBuilder.group({nombre:["",l.kI.compose([l.kI.required,l.kI.minLength(3),l.kI.maxLength(60)])],apellido:["",l.kI.compose([l.kI.required,l.kI.minLength(3),l.kI.maxLength(60)])],email:["",l.kI.compose([l.kI.required,l.kI.minLength(3),l.kI.maxLength(60)])],celular:["",l.kI.compose([l.kI.required,l.kI.minLength(3),l.kI.maxLength(24)])],nota:["",l.kI.compose([l.kI.required,l.kI.minLength(3)])],metodo:["",l.kI.compose([l.kI.required])],tipo:["",l.kI.compose([l.kI.required])],estado:[!0,l.kI.compose([])]}),"crear"!==this.data.action&&(this.actionBtn="Actualizar",this.clientesForm.controls.nombre.setValue(this.data.cliente.nombre),this.clientesForm.controls.apellido.setValue(this.data.cliente.apellido),this.clientesForm.controls.email.setValue(this.data.cliente.email),this.clientesForm.controls.celular.setValue(this.data.cliente.celular),this.clientesForm.controls.nota.setValue(this.data.cliente.nota),this.clientesForm.controls.estado.setValue(this.data.cliente.estado)),this._clientesService.metodosdecaptacion$.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(i=>{this.metodos=i.registros,this._changeDetectorRef.markForCheck(),console.log(i,"==metodos en modal")}),this._clientesService.tiposclientes$.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(i=>{this.tipos=i.registros,this._changeDetectorRef.markForCheck(),console.log(i,"==tipos en modal")})}get nombre(){return this.clientesForm.get("nombre")}get apellido(){return this.clientesForm.get("apellido")}get email(){return this.clientesForm.get("email")}get celular(){return this.clientesForm.get("celular")}get nota(){return this.clientesForm.get("nota")}get estado(){return this.clientesForm.get("estado")}closeDialog(){this.dialogRef.close(!1)}guardar(){if(!this.clientesForm.invalid)return this.dialogRef.close(this.clientesForm.value)}}m.\u0275fac=function(i){return new(i||m)(e.Y36(c),e.Y36(l.qu),e.Y36(p.so),e.Y36(e.sBO),e.Y36(p.WI))},m.\u0275cmp=e.Xpm({type:m,selectors:[["modalDialog"]],decls:57,vars:28,consts:[[1,"flex","w-full"],["class","font-bold px-0 text-lg","mat-dialog-title","",4,"ngIf"],[1,"m-0"],[1,"mt-5",3,"formGroup","ngSubmit"],[1,"grid","sm:grid-cols-8","gap-6"],[1,"mt-2","col-span-6","md:col-span-2"],[1,"fuse-mat-no-subscript","w-full"],["matInput","","formControlName","nombre",3,"placeholder","spellcheck"],["class","alert alert-danger mt-2 px-1 text-red-500",4,"ngIf"],["matInput","","formControlName","apellido",3,"placeholder","spellcheck"],[1,"mt-2","col-span-6","md:col-span-4"],["matInput","","formControlName","email",3,"placeholder","spellcheck"],["matInput","","formControlName","celular",3,"placeholder","spellcheck"],[1,"mt-2","col-span-6"],[1,"w-full"],["matInput","",3,"formControlName","required","rows"],["formControlName","estado",1,"mt-5",3,"color"],[1,"mt-2","col-span-6","md:col-span-3"],[3,"formControlName"],[4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-8"],["type","button","class","ml-auto","mat-button","",3,"click",4,"ngIf"],["type","submit","class","ml-2","mat-flat-button","",3,"color","disabled",4,"ngIf"],["class"," ","mat-button","","mat-dialog-close","",3,"click",4,"ngIf"],["mat-dialog-title","",1,"font-bold","px-0","text-lg"],[1,"alert","alert-danger","mt-2","px-1","text-red-500"],[4,"ngIf"],[3,"value"],["type","button","mat-button","",1,"ml-auto",3,"click"],["type","submit","mat-flat-button","",1,"ml-2",3,"color","disabled"],["mat-button","","mat-dialog-close","",1,"",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.YNc(1,H,2,0,"h1",1),e.YNc(2,K,2,0,"h1",1),e.YNc(3,W,2,0,"h1",1),e.qZA(),e._UZ(4,"hr",2),e.TgZ(5,"form",3),e.NdJ("ngSubmit",function(){return t.guardar()}),e.TgZ(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e._uU(10,"Nombre"),e.qZA(),e._UZ(11,"input",7),e.qZA(),e.YNc(12,ie,4,3,"div",8),e.qZA(),e.TgZ(13,"div",5)(14,"mat-form-field",6)(15,"mat-label"),e._uU(16,"Apellido"),e.qZA(),e._UZ(17,"input",9),e.qZA(),e.YNc(18,ae,4,3,"div",8),e.qZA(),e.TgZ(19,"div",10)(20,"mat-form-field",6)(21,"mat-label"),e._uU(22,"Email"),e.qZA(),e._UZ(23,"input",11),e.qZA(),e.YNc(24,de,4,3,"div",8),e.qZA(),e.TgZ(25,"div",5)(26,"mat-form-field",6)(27,"mat-label"),e._uU(28,"Celular"),e.qZA(),e._UZ(29,"input",12),e.qZA(),e.YNc(30,ue,4,3,"div",8),e.qZA(),e.TgZ(31,"div",13)(32,"mat-form-field",14),e._UZ(33,"textarea",15),e.TgZ(34,"mat-label"),e._uU(35,"Nota"),e.qZA()(),e.YNc(36,he,3,2,"div",8),e.qZA(),e.TgZ(37,"div",5)(38,"mat-checkbox",16),e._uU(39," Estado "),e.qZA(),e.YNc(40,ve,1,0,"div",8),e.qZA(),e.TgZ(41,"div",17)(42,"mat-form-field",14)(43,"mat-label"),e._uU(44,"M\xe9todo de captaci\xf3n"),e.qZA(),e.TgZ(45,"mat-select",18),e.YNc(46,xe,3,2,"ng-container",19),e.qZA()()(),e.TgZ(47,"div",17)(48,"mat-form-field",14)(49,"mat-label"),e._uU(50,"Tipo de cliente"),e.qZA(),e.TgZ(51,"mat-select",18),e.YNc(52,Ce,3,2,"ng-container",19),e.qZA()()()(),e.TgZ(53,"div",20),e.YNc(54,Ze,2,0,"button",21),e.YNc(55,be,2,3,"button",22),e.YNc(56,Te,2,0,"button",23),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("ngIf","crear"===t.data.action),e.xp6(1),e.Q6J("ngIf","editar"===t.data.action),e.xp6(1),e.Q6J("ngIf","ver"===t.data.action),e.xp6(2),e.Q6J("formGroup",t.clientesForm),e.xp6(6),e.Q6J("placeholder","Nombre")("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.nombre.invalid&&(t.nombre.dirty||t.nombre.touched)),e.xp6(5),e.Q6J("placeholder","Apellido")("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.apellido.invalid&&(t.apellido.dirty||t.apellido.touched)),e.xp6(5),e.Q6J("placeholder","Email")("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.email.invalid&&(t.email.dirty||t.email.touched)),e.xp6(5),e.Q6J("placeholder","Celular")("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",t.celular.invalid&&(t.celular.dirty||t.celular.touched)),e.xp6(3),e.Q6J("formControlName","nota")("rows",5),e.xp6(3),e.Q6J("ngIf",t.nota.invalid&&(t.nota.dirty||t.nota.touched)),e.xp6(2),e.Q6J("color","primary"),e.xp6(2),e.Q6J("ngIf",t.estado.invalid&&(t.estado.dirty||t.estado.touched)),e.xp6(5),e.Q6J("formControlName","metodo"),e.xp6(1),e.Q6J("ngForOf",t.metodos),e.xp6(5),e.Q6J("formControlName","tipo"),e.xp6(1),e.Q6J("ngForOf",t.tipos),e.xp6(2),e.Q6J("ngIf","ver"!==t.data.action),e.xp6(1),e.Q6J("ngIf","ver"!==t.data.action),e.xp6(1),e.Q6J("ngIf","ver"===t.data.action))},dependencies:[N.lW,M.oG,x.KE,x.hX,k.Nt,S.gD,E.ey,u.sg,u.O5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,p.ZT,p.uh]});var Ie=a(8552),Ae=a(6e3);function Je(n,i){1&n&&(e.TgZ(0,"div",15),e._UZ(1,"mat-progress-bar",16),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function Qe(n,i){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",31),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Ne(n,i){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",32),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function ke(n,i){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"div",22),e._uU(3),e.qZA(),e.TgZ(4,"div",26),e._uU(5),e.qZA(),e.TgZ(6,"div",26),e._uU(7),e.qZA(),e.TgZ(8,"div",26),e._uU(9),e.qZA(),e.TgZ(10,"div",26),e._uU(11),e.qZA(),e.TgZ(12,"div",26),e.YNc(13,Qe,2,1,"ng-container",13),e.YNc(14,Ne,2,1,"ng-container",13),e.qZA(),e.TgZ(15,"div",27)(16,"button",28)(17,"mat-icon",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.editar(r))}),e.qZA()(),e.TgZ(18,"button",28)(19,"mat-icon",30),e.NdJ("click",function(){const r=e.CHM(t).$implicit,d=e.oxw(4);return e.KtG(d.eliminar(r))}),e.qZA()()()(),e.BQk()}if(2&n){const t=i.$implicit;e.xp6(3),e.hij(" ",t.nombre," "),e.xp6(2),e.hij(" ",t.apellido," "),e.xp6(2),e.hij(" ",t.email," "),e.xp6(2),e.hij(" ",t.celular," "),e.xp6(2),e.hij(" ",t.nota," "),e.xp6(2),e.Q6J("ngIf",t.estado),e.xp6(1),e.Q6J("ngIf",!t.estado),e.xp6(2),e.Q6J("matTooltip","Editar"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:pencil"),e.xp6(1),e.Q6J("matTooltip","Eliminar")}}function Ue(n,i){if(1&n&&(e.ynx(0),e.YNc(1,ke,20,10,"ng-container",24),e.BQk()),2&n){const t=i.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const ye=function(n){return{"pointer-events-none":n}},De=function(){return[5,10,25,100]};function qe(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"div",18)(2,"div",19)(3,"div",20),e._uU(4," NOMBRE "),e.qZA(),e.TgZ(5,"div",21),e._uU(6," APELLIDO "),e.qZA(),e.TgZ(7,"div",21),e._uU(8," EMAIL "),e.qZA(),e.TgZ(9,"div",21),e._uU(10," CELULAR "),e.qZA(),e.TgZ(11,"div",21),e._uU(12," NOTA "),e.qZA(),e.TgZ(13,"div",21),e._uU(14," ESTADO "),e.qZA(),e.TgZ(15,"div",22),e._uU(16,"ACCIONES"),e.qZA()(),e.YNc(17,Ue,2,2,"ng-container",13),e.ALo(18,"async"),e.qZA(),e._UZ(19,"mat-paginator",23),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","nombre"),e.xp6(2),e.Q6J("mat-sort-header","apellido"),e.xp6(2),e.Q6J("mat-sort-header","email"),e.xp6(2),e.Q6J("mat-sort-header","celular"),e.xp6(2),e.Q6J("mat-sort-header","nota"),e.xp6(2),e.Q6J("mat-sort-header","estado"),e.xp6(4),e.Q6J("ngIf",e.lcZ(18,13,t.clientes$)),e.xp6(2),e.Q6J("ngClass",e.VKq(15,ye,t.isLoading))("length",t.paginationClientes.length)("pageIndex",t.paginationClientes.page)("pageSize",t.paginationClientes.size)("pageSizeOptions",e.DdM(17,De))("showFirstLastButtons",!0)}}function Fe(n,i){if(1&n&&(e.ynx(0),e.YNc(1,qe,20,18,"ng-container",17),e.BQk()),2&n){const t=i.ngIf;e.oxw();const o=e.MAs(18);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function Me(n,i){1&n&&(e.TgZ(0,"div",33),e._uU(1," No ha registros! "),e.qZA())}class I{constructor(i,t,o,s,r){this._changeDetectorRef=i,this._clientesService=t,this._dialog=o,this._snackBar=s,this._confirmDialog=r,this.searchInputControl=new l.p4,this._unsubscribeAll=new w.x,this.isLoading=!1}ngOnInit(){this._clientesService.paginationClientes$.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(i=>{this.paginationClientes=i,this._changeDetectorRef.markForCheck()}),this.clientes$=this._clientesService.clientes$,this.searchInputControl.valueChanges.pipe((0,Z.R)(this._unsubscribeAll),(0,$.b)(300),(0,b.w)(i=>(this.isLoading=!0,this._clientesService.getClientes(0,10,"_id","desc",i))),(0,T.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"_id",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,Z.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,G.T)(this._sort.sortChange,this._paginator.page).pipe((0,b.w)(()=>(this.isLoading=!0,this._clientesService.getClientes(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,T.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}crear(){this._dialog.open(m,{height:"auto",width:"800px",autoFocus:!1,data:{cliente:!1,action:"crear"}}).afterClosed().subscribe(t=>{t&&this._clientesService.createCliente(t).subscribe(o=>{o.ok&&this._snackBar.mostrarAlerta(o.mensaje,"mat-primary")})})}editar(i){this._dialog.open(m,{height:"auto",width:"800px",autoFocus:!1,data:{cliente:i,action:"editar"}}).afterClosed().subscribe(o=>{o&&this._clientesService.updateCliente(i._id,o).subscribe(s=>{s.ok&&this._snackBar.mostrarAlerta(s.mensaje,"mat-primary")})})}ver(i){this._dialog.open(m,{height:"650px",autoFocus:!1,data:{cliente:i,action:"ver"}})}eliminar(i){this._confirmDialog.open("\xbfEst\xe1s seguro de que deseas eliminar este producto?","\xa1Esta acci\xf3n no se puede deshacer!","Eliminar").afterClosed().subscribe(d=>{"confirmed"===d&&this._clientesService.deleteCliente(i._id).subscribe(Q=>{this._snackBar.mostrarAlerta(Q.mensaje,Q.ok?"mat-primary":Q.alerta)})})}trackByFn(i,t){return t.id||i}}I.\u0275fac=function(i){return new(i||I)(e.Y36(e.sBO),e.Y36(c),e.Y36(p.uw),e.Y36(Ie.c),e.Y36(Ae.E))},I.\u0275cmp=e.Xpm({type:I,selectors:[["clientes-list"]],viewQuery:function(i,t){if(1&i&&(e.Gf(U.NW,5),e.Gf(A.YE,5)),2&i){let o;e.iGM(o=e.CRH())&&(t._paginator=o.first),e.iGM(o=e.CRH())&&(t._sort=o.first)}},decls:19,vars:10,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","mt-6","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["noClientes",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid-clientes","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,""],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid-clientes","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,"hidden","sm:block"],[1,"flex"],[1,"min-w-10","min-h-7","h-7",3,"matTooltip"],[1,"icon-size-5","text-blue-500",3,"svgIcon","click"],["svgIcon","heroicons_outline:trash",1,"text-red-500",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Je,2,1,"div",2),e.TgZ(3,"div",3),e._uU(4,"Clientes"),e.qZA(),e.TgZ(5,"div",4)(6,"mat-form-field",5),e._UZ(7,"mat-icon",6)(8,"input",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return t.crear()}),e._UZ(10,"mat-icon",9),e.TgZ(11,"span",10),e._uU(12,"Crear"),e.qZA()()()(),e.TgZ(13,"div",11)(14,"div",12),e.YNc(15,Fe,2,2,"ng-container",13),e.ALo(16,"async"),e.YNc(17,Me,2,0,"ng-template",null,14,e.W1O),e.qZA()()()),2&i&&(e.xp6(2),e.Q6J("ngIf",t.isLoading),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",t.searchInputControl)("autocomplete","off")("placeholder","Buscar..."),e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(16,8,t.clientes$)))},dependencies:[N.lW,x.KE,x.qo,Y.Hw,k.Nt,U.NW,L.pW,A.YE,A.nU,B.gM,u.mk,u.sg,u.O5,l.Fj,l.JJ,l.oH,u.Ov],styles:[".inventory-grid-clientes{grid-template-columns:auto 100px}@media (min-width: 600px){.inventory-grid-clientes{grid-template-columns:200px 200px 200px 200px auto 100px 200px}}@media (min-width: 960px){.inventory-grid-clientes{grid-template-columns:200px 200px 200px 200px auto 100px 200px}}@media (min-width: 1280px){.inventory-grid-clientes{grid-template-columns:200px 200px 200px 200px auto 100px 200px}}\n"],encapsulation:2,data:{animation:X.L},changeDetection:0});class f{constructor(i){this._clientesService=i}resolve(i,t){return this._clientesService.getClientes()}}f.\u0275fac=function(i){return new(i||f)(e.LFG(c))},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"});class _{constructor(i){this._clientesService=i}resolve(i,t){return this._clientesService.getMetodosDeCaptacion()}}_.\u0275fac=function(i){return new(i||_)(e.LFG(c))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"});class h{constructor(i){this._clientesService=i}resolve(i,t){return this._clientesService.getTiposDeClientes()}}h.\u0275fac=function(i){return new(i||h)(e.LFG(c))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});const Ye=[{path:"",pathMatch:"full",redirectTo:"lista"},{path:"lista",component:C,children:[{path:"",component:I,resolve:{clientes:f,metodosdecaptacion:_,tiposclientes:h}}]}];class v{}v.\u0275fac=function(i){return new(i||v)},v.\u0275mod=e.oAB({type:v}),v.\u0275inj=e.cJS({imports:[F.Bz.forChild(Ye),N.ot,M.p9,x.lN,Y.Ps,k.c,O.Tx,U.TU,L.Cv,E.si,A.JX,S.LD,R.rP,B.AV,z.m,p.Is,l.UX,l.u5,j.p0]})}}]);